{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/BPF-LSM/",
    "result": {"data":{"cur":{"id":"ba844679-8b48-511e-87ab-09f24c363b56","html":"<p>석사 과정동안 진행했던 과제에서 BPF-LSM 기술을 사용하여 컨테이너 환경을 위한 보안 모듈을 개발한 적이 있다.\n이번 기회에 관련된 내용들을 복습하고, 또 정리해두면 좋을 것 같았다.</p>\n<h2 id=\"0-bpf-lsm-기술이란\" style=\"position:relative;\"><a href=\"#0-bpf-lsm-%EA%B8%B0%EC%88%A0%EC%9D%B4%EB%9E%80\" aria-label=\"0 bpf lsm 기술이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. BPF-LSM 기술이란</h2>\n<p>BPF-LSM 기술을 한 마디로 정리하자면 다음과 같다.</p>\n<blockquote>\n<p>Privileged User가 MAC(Mandatory Access Control) 및 Audit 정책을 구현하기 위해 BPF 프로그램을 LSM Hook에 연결하여 시스템을 런타임 계측(Runtime Instrumentation)하는 보안 모듈</p>\n</blockquote>\n<p>즉, BPF-LSM이란 기술을 이해하기 위해선 MAC, BPF, LSM에 대한 개념이 선행되어야 한다.\n따라서 BPF-LSM을 본격적으로 정리하기에 앞서, 관련 기술들을 먼저 하나씩 정리해보았다.</p>\n<p>정리된 글들은 다음에서 확인할 수 있다.</p>","excerpt":"석사 과정동안 진행했던 과제에서 BPF-LSM 기술을 사용하여 컨테이너 환경을 위한 보안 모듈을 개발한 적이 있다.\n이번 기회에 관련된 내용들을 복습하고, 또 정리해두면 좋을 것 같았다. 0. BPF-LSM 기술이란 BPF-LSM 기술을 한 마디로 정리하자면 다음과 같다. Privileged User가 MAC(Mandatory Access Control) 및 Audit 정책을 구현하기 위해 BPF 프로그램을 LSM Hook에 연결하여 시스템을 런타임 계측(Runtime Instrumentation)하는 보안 모듈 즉, BPF-LSM이란 기술을 이해하기 위해선 MAC, BPF, LSM에 대한 개념이 선행되어야 한다.\n따라서 BPF-LSM을 본격적으로 정리하기에 앞서, 관련 기술들을 먼저 하나씩 정리해보았다. 정리된 글들은 다음에서 확인할 수 있다.","frontmatter":{"date":"October 25, 2022","title":"TIL - BPF-LSM","categories":"TIL Linux","author":"Mini","emoji":"📖"},"fields":{"slug":"/BPF-LSM/"}},"next":{"id":"5635502b-758d-5ada-a10b-a2f6674cf324","html":"<p>리눅스 커널에 대해 공부한다면, eBPF에 대해 한 번쯤은 들어봤을 것이다.\n필자 또한, 석사 과정 중 진행했던 과제에서 BPF-LSM 기술을 이용하여 컨테이너 환경을 위한 보안 모듈을 개발한 적이 있다.</p>\n<p>BPF-LSM이란 기술을 이해하기 위해서는 여러 기술들에 대한 개념들이 선행되어야하는데, 이를 하나로 정리하기엔 글이 너무 길어질 것 같아 여기서는 BPF에 대한 내용만을 추렸다.</p>\n<h2 id=\"0-bpf\" style=\"position:relative;\"><a href=\"#0-bpf\" aria-label=\"0 bpf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0. BPF</h2>\n<p>BPF란 Berkeley Packet Filter의 약자이다.\n이 개념은 1992년 Steve McCane과 Van Jacobson의 Usenix Conference Winter ‘93 논문 <a href=\"https://www.tcpdump.org/papers/bpf-usenix93.pdf\">“The BSD Packet Filter: A New Architecture for User-level Packet Capture”</a>에서 처음으로 소개되었다.\n커널과 같은 Privileged context에서 sandboxed program을 실행할 수 있는 기술이다.\n즉, 커널 내부에 사용자가 작성한 코드를 삽입하여 안전하게 실행시킬 수 있는 도구이며, 커널 모듈이 아닌 코드를 실행하기 위한 mini-VM이라고 할 수 있다.\n커널 소스 코드를 변경하거나 커널 모듈을 로드할 필요 없이 커널의 기능을 안전하고 효율적으로 확장하는 데 사용된다.</p>\n<p>운영 체제는 커널의 Privileged 능력으로 인해 Observability, security, networking functionality를 구현하는데 최적인 장소임과 동시에, 안정성 및 보안에 대한 높은 요구 사항으로 그 바전 속도가 외부에 비해 현저히 더뎠다.\nBPF는 이러한 기존의 공식을 근본적으로 바꿨다.\n운영 체제 내에서 샌드박스 프로그램을 실행할 수 있도록 함으로써 애플리케이션 개발자는 BPF 프로그램을 실행하여 런타임에 운영 체제에 추가 기능을 구현할 수 있다.</p>\n<h2 id=\"1-cbpf-vs-ebpf\" style=\"position:relative;\"><a href=\"#1-cbpf-vs-ebpf\" aria-label=\"1 cbpf vs ebpf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. cBPF vs. eBPF</h2>\n<p>BPF는 cBPF와 eBPF로 나누어 명칭된다.\ncBPF는 classic BPF의 약자로 eBPF(extended BPF)가 나오지 전, 패킷 필터의 목적으로만 디자인된 초기 BPF를 의미한다.\n즉, 소켓 필터링을 위해 소켓에만 BPF 프로그램을 연결할 수 있었다.</p>\n<p>이는 BPF의 첫 번째 사용 사례인 <code class=\"language-text\">tcpdump</code>를 살펴보면 알 수 있다.\n<code class=\"language-text\">tcpdump</code>는 유닉스 계열에서 네트워크 상의 패킷을 캡처하여 표시해주는 도구이며, 윈도우 계열에서는 <code class=\"language-text\">Windump</code> 또는 <code class=\"language-text\">WireShark</code>가 있다.\n<code class=\"language-text\">tcpdump</code>를 실행하면 사용자가 정의한 필터가 BPF 프로그램으로 컴파일되고 이 BPF 프로그램은 raw <code class=\"language-text\">AF_PACKET</code> 소켓에 연결(attach)되어 필터에 의해 캡처된 패킷을 프린트한다.</p>\n<p>이후, 2013년 Alexei Starovoitov를 필두로 수년에 걸처 cBPF에 다양한 기능이 추가되었고, 기존의 소켓 필터링 이외에도 다양한 attach point들이 지원되는 현재의 eBPF가 탄생했다.\neBPF는 다음과 같은 여러 가지 방법을 통해 cBPF를 확장한다:</p>\n<ul>\n<li><strong>x86-64와 비슷한 아키텍처</strong>: eBPF는 64비트 레지스터를 사용하며 사용 가능한 레지스터 수(2에서 10으로), opcode 수를 늘렸다.</li>\n<li><strong>네트워킹 subsystem에서의 분리</strong>: cBPF는 패킷 기반 데이터 모델로 제한되었으며, 패킷 필터링에 사용되었기 때문에 해당 코드는 네트워킹 하위 시스템 내(<code class=\"language-text\">net/core/filter.c</code>)에 있었다. 이와 달리, eBPF는 더이상 데이터 모델에 구속되지 않으며 모든 용도로 사용할 수 있다. 그 결과, tracepoints 또는 kprobes(및 user-space의 uprobes)에 연결 가능해졌다. 이는 eBPF가 instrumentation, performance analysis 및 기타 커널 하위 시스템 내에서 더 많은 용도로 사용될 수 있는 가능성을 열어주었다. 현재 eBPF 코드는 자체 경로인 <code class=\"language-text\">kernel/bpf</code>에 위치한다.</li>\n<li><strong>Maps</strong>: Map은 key-value 형태로 다양한 유형의 데이터를 저장하는 일반적인 데이터 구조이며, 전역 데이터 저장소(glocal data store)이다. eBPF 커널 프로그램 간의 데이터 공유 또는 커널과 user-space 어플리케이션 간의 데이터 공유에 사용된다. Map 덕분에 eBPF로 작성된 프로그램은 state를 유지할 수 있으므로 이벤트 전반에 걸쳐 정보를 집계하고 동적 동작을 수행할 수 있다.</li>\n<li><strong>Helper 함수</strong>: 커널 내부에서 실행되는 함수이며, eBPF 프로그램에서 시스템콜을 호출할 실행할 수 있도록 해준다.</li>\n<li><strong>Tail-calls</strong>: eBPF는 4096 bytes로 크기가 제한된다. 이러한 제한은 tail-call 기능으로 eBPF 프로그램이 새로운 eBPF 프로그램을 호출함으로써 극복할 수 있다.</li>\n</ul>\n<p>이외, 기존 네트워크 프로그래밍과 관련된 기능에서의 확장도 있었다:</p>\n<ul>\n<li>TC(Traffic Control)을 위한 네트워크 스케줄러와 qdiscs</li>\n<li>XDP(eXpress Data Path)</li>\n</ul>\n<p><code class=\"language-text\">bpf()</code> 시스템콜이 추가된 v3.18 이후로는 일부에서만 cBPF가 이용되고 있으며, 이 글을 작성하는 시점인 현재는 eBPF가 cBPF를 완전히 대체하기 때문에 eBPF는 BPF로 언급되기도 한다.</p>\n<p>Packet Filter라는 이름처럼 처음 해당 기술이 만들어진 목적은 커널 내부에서 자체 코드를 실행하여 패킷을 필터링하기 위함이었지만, **정의에 의한 이벤트 구동(event-driven by definition)**이라는 강력한 기능으로 인해 현재는 기존의 네트워크 영역뿐만 아니라 커널 tracing 및 event monitoring 영역에서도 유용하게 사용되고 있다.\n이러한 강력한 기능으로 인해, 인텔의 Brendan Gregg는 BPF 기술을 <a href=\"http://www.brendangregg.com/blog/2016-03-05/linux-bpf-superpowers.html\">Linux superpower</a>라고 언급한바 있다.</p>\n<p>그 뿌리는 packet filter였지만 확장성으로 인해 많은 영역에서 다양한 기능으로 사용되고 있는 현재, <strong><em>eBPF는 더 이상 어떤 것의 약어로써 설명되지 않는다.</em></strong></p>\n<h3 id=\"11-bpf의-역사\" style=\"position:relative;\"><a href=\"#11-bpf%EC%9D%98-%EC%97%AD%EC%82%AC\" aria-label=\"11 bpf의 역사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. BPF의 역사</h3>\n<p>앞서 간략하게 언급했듯이, BPF는 1992년 Steve McCane과 Van Jacobson의 Usenix Conference Winter ‘93 논문 <a href=\"https://www.tcpdump.org/papers/bpf-usenix93.pdf\">“The BSD Packet Filter: A New Architecture for User-level Packet Capture”</a>에서 처음으로 소개된 이후로도 다양한 사람들에 의한 발전을 통해 현재의 eBPF가 되었다.</p>\n<p>BPF가 CMU/CSPF(Standford Packet Filter)와 같은 이전 모델과 크게 다른 점은 well throught out memory model을 사용하며, 그것을 커널 내부의 VM을 통하여 노출한다는 것이다.\n이를 통해 BPF 필터는 필터 코드와 커널 사이의 경계를 유지하면서도 효율적인 방식으로 트래픽 필터링을 수행할 수 있었다.\n즉, McCanne과 Jacobson이 제시하는 다음 다이어그램에서처럼 BPF는 필터와 일치하는 모든 패킷에 대해 User-space와 Kernel-space 간의 값비싼 context switch를 만들지 않도록 필터와 User-space 사이에 버퍼를 사용한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.88888888888887%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACh0lEQVQ4y6VUXU/iUBDt//8Zvpqw+GKigELBAgEXH2hRqyxtkfLZ8lU+1WPO6G2Kkt2HnWTSTm/vmTMz517t7e0NqyjCarXCbrdDGIYIgkDixWIh75vNBrT39/ejnlzTdtstquUybuu/sVwuUTYMGEYZvu9jPB7D87qYz2bxxn+Zxh+n06kwo/V9H71eD2ROhi8vL3h9fY2d/3ONTmN1nuvJGr9pZNXpdMQHgwGen5/Rbrfl3fM8tFqtuGy2gawZK59MJjCbJoIw/AQMJhM0Gg00m00UCgVUKhXcNe5wdXWFarWKSrmMx8dHYbPf76UtiuF6vRZP9lJjlny+AF3XUSwWcXFxgWwmi3w+j+vra6TTadzf38vPHBpZWqYJ07Sw2WwF8GAopExWZElAOmMClkolYf3w8CCbtttPALKkM0ESMGZYq9XECaYXdNyUboRxNpsRQNu245Jnsxnm87kMkk8mOQAcjUb4lUrh5OQEuVwOl5eX8qSzj4wtyzrYxAGRobKkpLThcIhUKoXT01NkMhnp29nZmfSOoOfn5zBN86BPVAGnnQSLGZIy6VNz1CJ76rquCJvJ6CyTOiMz9oylsn9HAf+meiVWJRHGSft+7OKTotQvyl+t4Ps9YRZFEbrdLlzXQxgEGI3Gwr7f78uAFBj3/mCoPrBswzAEhG24rddRrVS/TlEbRV2HbT/FcvnOWFMl0VVJ3EwwGqdJtnKW93thqMonwGa9huO4cQJNNVo5h6S0ptair+uNMStgzO+MmbjzpyNTZxIN/2nsJS8RHpCDoSQnJcPwugiDEPP5DJbVktuId6MakhrKjx4ekwHLebJtDAZDKZ0APFGO48DpOCLs3e74lD8AIDKd/49uiiwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eBPF-1.png\"\n        title=\"eBPF-1.png\"\n        src=\"/static/62cb19611661e69e96e57edc37da7f35/37523/eBPF-1.png\"\n        srcset=\"/static/62cb19611661e69e96e57edc37da7f35/e9ff0/eBPF-1.png 180w,\n/static/62cb19611661e69e96e57edc37da7f35/f21e7/eBPF-1.png 360w,\n/static/62cb19611661e69e96e57edc37da7f35/37523/eBPF-1.png 720w,\n/static/62cb19611661e69e96e57edc37da7f35/27b8e/eBPF-1.png 836w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>McCanne과 Jacobson이 구현한 BPF VM은 accumulator, index register, scratch memory store, implicit program counter로 구성되었으며, 매우 간결하고 단순했다.\n이는 논문에서 저자가 소개한 다음 예제 프로그램에서 살펴볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    ldh [12]                    // ethertype field info를 레지스터에 로드\n    jeq #ETHERTYPE_IP, L1, L2   // IP의 ethertype과 레지스터 비교\nL1: ret #TRUE                   // 비교가 참일 경우, true 반환\nL2: ret #0                      // 비교가 거짓일 경우, 0 반환</code></pre></div>\n<p>이처럼 4개의 VM instruction만을 사용하여 BPF는 IP 패킷 필터를 제공할 수 있었으며, 이는 동일한 기능을 제공하기 위해 184개의 CPU 인스트럭션이 필요한 것과 대조된다.</p>\n<p>이후, 리눅스 커널은 v2.5 이후로 Jay Schullist가 주도하여 BPF 기능을 추가함으로써 이를 지원하기 시작했으며, <code class=\"language-text\">net/core/filter.c</code>에서 리눅스 BPF의 구현을 찾을 수 있다.</p>\n<p>2011년, 커널 v3.15에서 Eric Dumazet이 BPF 인터프리터를 JIT(Just-In-Time) 컴파일러로 전환하였다. 이를 통해 커널은 BPF 바이트코드를 해석할 필요 없이, 대상 아키텍처(x86, ARM, MIPS 등)로 직접 변환할 수 있었다.</p>\n<p>2014년 12월, 커널 v3.18에 <code class=\"language-text\">bpf()</code> 시스템콜이 추가되고 Alexei Starovoitov가 새로운 BPF JIT을 도입하면서부터 eBPF로 알려진 BPF 기반의 새로운 아키텍처가 사용되었다.</p>\n<p>이후 커널 개발자들에 의해 eBPF는 다양한 커널 시스템에서 빠르게 활용되었고, 사양한 use case를 다루는 eBPF 기반 프로젝트들이 탄생했다.\n아래는 리눅스에서 eBPF를 사용한 다양한 커널 tracing tool들을 보여준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACPUlEQVQozyWSW3eqMBSE+f9/yHMeWls9LYoFinKNEHJBESKSEIjgpZxlnef51prZe7RxHO/3++12G8fxdrvd7/efn5+6rvM8J4RkWYYxLoriMgyXXz0NT2lPJs9zjHGe57LrQgC8IMjLMi8KuttBhLrz2QsCY7UKgrBtWwhhmqZ932td1zVNQyndAlAyVhNS+C51nCZNOUxqmDAQ3cviGEVilw2Xi1KKYEwJHcfxAcdx7Ps+hBARctpsruv14Lq3IOCGcVou+MrYz2flfC4CvxZi6AfGmGmaVXXSmqZBKH3Wk23HI1d8L1XwLV1TbKxMn6f/pvH8tfjSif3FRXNkDKXpQl8QQjQIoW3bfd+P46iUgihIoINpBGJ7G88jMENIPwu/524c6lw0TSMAAIZhUEo1jJGu64SQ38tdrYhNPtOpddD93b/vv6+riZfoNTWK5B0Gn/mhTJIYIbRcLh8wY8cwDKuq6jolG/FhwT8fyWQWvyw8nyys7YflTWuyYMl7lTlcNIdDnkDoOE5GqXY8Ht/e3kzTXG82h0M+s5LJIn0x91N7a0Sz2Xpqg0+WWWkwLTJ3uFw5r13X9Xxftq3GObdtG2NclmUrpY0Pxk6sdvwD5q9+8uIl8zhzyuZrX7tZ2St1vV4ppftd9nhV3/d1XUsphRAoTRFCGGPOOWMsjEL4SLiOIgAA6JQax7Ft1bGgNJpdL2eN1/V+v3+O9Lk+KWVZlkKI0+lUFAUAgDF2qiqlVNu2UsqM4gx5Q3/+DxubgC957NvyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eBPF-2.png\"\n        title=\"eBPF-2.png\"\n        src=\"/static/b6d70998647d2f3be603ad133e253ff0/37523/eBPF-2.png\"\n        srcset=\"/static/b6d70998647d2f3be603ad133e253ff0/e9ff0/eBPF-2.png 180w,\n/static/b6d70998647d2f3be603ad133e253ff0/f21e7/eBPF-2.png 360w,\n/static/b6d70998647d2f3be603ad133e253ff0/37523/eBPF-2.png 720w,\n/static/b6d70998647d2f3be603ad133e253ff0/302a4/eBPF-2.png 1080w,\n/static/b6d70998647d2f3be603ad133e253ff0/07a9c/eBPF-2.png 1440w,\n/static/b6d70998647d2f3be603ad133e253ff0/97a96/eBPF-2.png 2400w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>오늘날 eBPF는 다양한 영역에서 광범위하게 사용된다.\n최신 데이터 센터 및 클라우드 네이티브 환경에서 고성능 네트워킹 및 로드 밸런싱 제공하거나, 낮은 오버헤드로 세분화된 Security Observability 데이터 추출하거나, 애플리케이션 개발자가 애플리케이션을 tracing하는 것을 돕거나, Performance Troubleshooing 해결에 insight를 제공하거나, 컨테이너 런타임 보안을 강화하는 등의 Use Case에 사용되고 있다.</p>\n<h2 id=\"2-how-to-work\" style=\"position:relative;\"><a href=\"#2-how-to-work\" aria-label=\"2 how to work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. How to work</h2>\n<p>BPF 프로그램은 event-driven으로 커널/애플리케이션이 특정 Hook point를 통과할 때 실행된다.\n미리 정의된 hook에는 시스템콜, 함수의 entry/exit, 커널 tracepoint, 네트워크 이벤트 등이 포함된다.</p>\n<p>사용자는 작성한 BPF 프로그램을 <a href=\"https://man7.org/linux/man-pages/man2/bpf.2.html\"><code class=\"language-text\">bpf()</code></a> 시스템콜을 통해 로드할 수 있으며, <code class=\"language-text\">bpf()</code> 시스템콜은 해당 코드의 안전성(루프, 코드 크기 등)을 검사하여 검증한다.\n검증이 완료된 BPF 프로그램만이 커널 개체에 연결되며, 이후 해당 개체에서 이벤트가 발생(e.g., 네트워크 인터페이스가 패킷을 내보낼 때)할 때마다 작성된 BPF 프로그램이 실행된다.</p>\n<p>BPF 프로그램은 크게 3가지의 프로세스를 거쳐 실행된다:</p>\n<ol>\n<li>\n<p>eBPF 프로그램을 바이트 코드로 생성한다: 현재 eBPF 프로그램을 만드는 표준 방법은 C 코드로 작성한 다음 LLVM이 ELF 파일에 있는 eBPF 바이트 코드로 컴파일하도록 하는 것이다.</p>\n</li>\n<li>\n<p>프로그램을 커널에 로드하고 필요한 eBPF Map을 생성한다: 이 과정은 리눅에서 <code class=\"language-text\">bpf()</code> 시스템콜을 통해 수행된다. <code class=\"language-text\">bpf()</code> 시스템콜은 eBPF 프로그램의 유형을 선언하고, 바이트 코드를 로드한 뒤, Map을 초기화한다.</p>\n</li>\n</ol>\n<ul>\n<li>BPF 프로그램 유형: socket filter, kprobe handler, traffic control scheduler, traffic control action, tracepoint handler, eXpress Data Path (XDP), performance monitor, cgroup restriction, light weight tunnel</li>\n</ul>\n<ol start=\"3\">\n<li>로드된 프로그램을 시스템에 연결한다: eBPF 프로그램의 유형에 따라 해당 시스템에 연결되는 방식이 다르다. 프로그램이 연결되면 프로그램이 활성화되면서 정의된 작업을 수행한다. 여기에서 User-space 프로그램은 eBPF Map에서 state를 읽을 수 있으며, eBPF 프로그램을 관리할 수 있다.</li>\n</ol>\n<h2 id=\"3-ebpf를-이루는-구성-요소들\" style=\"position:relative;\"><a href=\"#3-ebpf%EB%A5%BC-%EC%9D%B4%EB%A3%A8%EB%8A%94-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C%EB%93%A4\" aria-label=\"3 ebpf를 이루는 구성 요소들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. eBPF를 이루는 구성 요소들</h2>\n<p>eBPF가 사용되기 위해서는 앞서 기술한 것처럼 프로그램 작성 및 컴파일, 커널 로드 및 시스템 연결 등과 같이 여러 단계가 동반된다.\n이 과정에서 다양한 기술이 사용되는데, 다음에서 각각의 기술드에 대한 세부 사항을 설몀한다.</p>\n<h3 id=\"31-ebpf-프로그램\" style=\"position:relative;\"><a href=\"#31-ebpf-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\" aria-label=\"31 ebpf 프로그램 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. eBPF 프로그램</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhUlEQVQI132M3QqCQBgFff+Hie58gfAiwUoQRBNcKyFT3MBdb/SbYLHoBxo4zM1hPL4QmZ0vWrEK1uzzEJkFO1qsMQTpBj/0qbvT8he3J95nTJDFdhxJjwpVVvS9ZhgM8zTR6Tt5UXG7Nq/Q36Az0LUtZVGTxAXxLiPaJhyijLNqfv7vPAA7xeZ5QDBytgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eBPF-3.png\"\n        title=\"eBPF-3.png\"\n        src=\"/static/a7160cd231b062b321f2a479a4d0848f/37523/eBPF-3.png\"\n        srcset=\"/static/a7160cd231b062b321f2a479a4d0848f/e9ff0/eBPF-3.png 180w,\n/static/a7160cd231b062b321f2a479a4d0848f/f21e7/eBPF-3.png 360w,\n/static/a7160cd231b062b321f2a479a4d0848f/37523/eBPF-3.png 720w,\n/static/a7160cd231b062b321f2a479a4d0848f/302a4/eBPF-3.png 1080w,\n/static/a7160cd231b062b321f2a479a4d0848f/1d553/eBPF-3.png 1159w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>리눅스 커널은 eBPF 프로그램이 바이트코드 형태로 로드될 것으로 예상한다.\n따라서 LLVM/Clang같은 컴파일러를 이용하여 C로 작성한 eBPF 프로그램 소스 코드를 바이트 코드로 컴파일한다.\nLLVM은 컴파일을 통해 프로그램 코드, Map 정의, relocation 정보, BTF meta data와 같은 정보가 포함된 eBPF ELF 파일을 생성한다.</p>\n<p>LLVM은 C와 같은 구문으로 작성된 프로그램을 eBPF 인스트럭션으로 변환하는데 필요한 eBPF 백앤드를 지원하는 유일한 컴파일러였다.\n그러나 GCC 10부터는 GCC 컴파일러에서도 eBPF를 지원하고 있다. 다만, 현재는 일부 기능이 누락되어 있다.</p>\n<h3 id=\"22-loader--verification\" style=\"position:relative;\"><a href=\"#22-loader--verification\" aria-label=\"22 loader  verification permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2. Loader &#x26; Verification</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVElEQVQoz22SW2sTQRSA90f7HxS8IohULQULSn0oWNSiD9oaTN1cTTeb6zbZTZrNJrvZ+0xupp9kW+uLBz7OYRi+M5wzSs2s8lE9whwZRFGMP5tRNcp8Kn7AsntIuSROUtJUkGxJUlarFf+Lq6srlG6/R7FyjtkzGY8dQj/kwrIoVWvYoxEi8Uljjzia3WSP5XLJZrNhvV7f5q1sG8rQuqTTNKkU6xR/1igVNDrNAb4fMvOmDPRDhvU3SK/C8HyfYPiN1XqN7/sYXYOG3sAe2Ugpr4X1eh1d13EcJzuM44gkcomCKXHo4k0s7GEnyxPbIPAuWcxFNgLXdel2u3jev1crW8FfUiFJghFa7jHa6QMGlWcY6lNiY4+0v4cwXyN6r5hdqvTNS4YDC8cZY5pmRpqmKNcDl5ksjNKso/rjM21dxZ/2CD0zwx40if0BkdcnDFz8IKbRbJM/U2m1u0RRki1MWUQ9hFslciqsowYTS0Urf8GxSqyTDhthIGcaRu0I4daIpxqBXcYdqBRyB3z99JJJP8fvuIFMXJR4UkVX39DX3tMu7tLKP6F99hSv+ZK4/xaSCmJ0zPmXOzitdwgnx6h9RKuwy1h7gf79Pn5rh7h/gEwclHBczoTdX4c0fj5HO7lLJ/+I+sk9bG2XpZdHOKcE1jFycpoJ0/Ep4cU+XnOHRu4hYWeH1LoRyqBLOi3jjwosZlXmXhnplUmnJRZ+ld+xnnGVtm7rTdJgFZ5nrCPttpbJFGW7hCAIsrVvv42czzPm8wVSzhFC/JfsrpQIIW/rLX8A4zsjIsyA0J8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eBPF-4.png\"\n        title=\"eBPF-4.png\"\n        src=\"/static/1a1bb6f1e64b1ad5597f57dc17cf1350/37523/eBPF-4.png\"\n        srcset=\"/static/1a1bb6f1e64b1ad5597f57dc17cf1350/e9ff0/eBPF-4.png 180w,\n/static/1a1bb6f1e64b1ad5597f57dc17cf1350/f21e7/eBPF-4.png 360w,\n/static/1a1bb6f1e64b1ad5597f57dc17cf1350/37523/eBPF-4.png 720w,\n/static/1a1bb6f1e64b1ad5597f57dc17cf1350/302a4/eBPF-4.png 1080w,\n/static/1a1bb6f1e64b1ad5597f57dc17cf1350/32ac3/eBPF-4.png 1249w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>컴파일된 eBPF 프로그램은 User-space에서 <code class=\"language-text\">bpf()</code> 시스템콜을 통해 커널로 전달되고, eBPF 프로그램을 커널에 로드하기 위한 작업을 시작한다.\n이후 커널에서는 두 단계를 거쳐 커널에 eBPF 프로그램을 로드하게 되는데, 첫 번쨰 단계로는 전달된 eBPF 프로그램이 안전한 프로그램인지 In-kernel Verifier가 해당 프로그램을 체크하고, 두 번째 단계에서는 JIT(Just-in-Time) 컴파일러를 통해 바이트코드를 kernel native 코드로 컴파일한다.</p>\n<h4 id=\"verification\" style=\"position:relative;\"><a href=\"#verification\" aria-label=\"verification permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verification</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVQoz02O60/aYBjF+++7S5boptu+7MvMpsvijeiiizIuIi1eQJBC7QUsWEAo0HIR2ve3WGXZSU7Ok5yT8xxJCMETnvRSb3Gk3BK/MMmod8zmwT9vgcXt+z4Nu4FW1ajX6nQ6nciTngOCMAwwmy7xQoH1PztktAuCMIi8KCOeVYgwKnRdNyrSqlWqlQotx2E2e0Ra/A5DcO4darbJUTqJqpYJgpf1L/wf3Z6Lbpi02w/ouoVl1fC8ERKBR0QxpmmbnKaT5OQznGYNxAgxHyLmz5ngccDE7zIZdQlmHsbtDYcHmyRPdnEfGsAEKXSzBK7MsPGbrrHHXfEHPSOG6Bwz76YQwxwMcuCdM2mnmfXOCPoy01acQT1GVfmCo24ydY6Yd9NI2tUW1cstrOvvlFLLaMoqSuoVhfxr/PtfMC4gvCzBUGbaOSXsy4jhBQNzA09b4zq+hJ59R7+yim/HkIrZDdTznzC+gscirpMglvhGJrMerSkZO+wkPmPpuwQ9mbmbjQpdfYNmfpnCyRJq6g1OYQXf3kdytANqpT3M/FeKibcY8gpqahlLeY93t4dtHZNXtmmqMXwngehnEQMFr76NoXxAV9Ywch+x85+Ytg6RGJdhrOK3FVw7yaidYXifxnNOmfWvYFSGqRqp8Erg30QUfhkmFRgvqCL8G/4CItmOcN4rDV0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eBPF-5.png\"\n        title=\"eBPF-5.png\"\n        src=\"/static/7eec5ccd8f6fbaf055256da4910acd5a/37523/eBPF-5.png\"\n        srcset=\"/static/7eec5ccd8f6fbaf055256da4910acd5a/e9ff0/eBPF-5.png 180w,\n/static/7eec5ccd8f6fbaf055256da4910acd5a/f21e7/eBPF-5.png 360w,\n/static/7eec5ccd8f6fbaf055256da4910acd5a/37523/eBPF-5.png 720w,\n/static/7eec5ccd8f6fbaf055256da4910acd5a/302a4/eBPF-5.png 1080w,\n/static/7eec5ccd8f6fbaf055256da4910acd5a/dc61a/eBPF-5.png 1147w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Verification 단계에서는 eBPF 프로그램이 커널에서 실행되기에 충분히 안전한지를 확인한다.\n이를 위해 verfier는 프로그램이 다음과 같은 조건을 충족하는지 확인한다:</p>\n<ul>\n<li>eBPF 프로그램을 로드하는 프로세스가 필요한 capabilities(privileges)를 보유하고 있는지 확인한다. unprivileged eBPF를 따로 활성화시키지 않을 경우에는 권한 있는 프로세스만이 eBPF 프로그램을 로드할 수 있다.</li>\n<li>프로그램이 충돌하거나 시스템에 손상을 주지 않는지</li>\n<li>프로그램이 완전히 완료되는지 (i.e. 무한루프)</li>\n</ul>\n<h4 id=\"jit-complication\" style=\"position:relative;\"><a href=\"#jit-complication\" aria-label=\"jit complication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JIT Complication</h4>\n<p>JIT(Just-in-Time) 컴파일러는 프로그램의 바이트코드를 machine-specific 인스트럭션 세트로 변환하여 프로그램의 실행 속도를 최적화시킨다.\n이 과정은 eBPF 프로그램이 native kernel code나 커널 모듈로 로드된 코드만큼 효율적으로 실행될 수 있도록 하는 단계로써 성능 최적화를 위한 과정이라고 볼 수 있다.</p>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://kubernetes.io/blog/2017/12/using-ebpf-in-kubernetes/\">https://kubernetes.io/blog/2017/12/using-ebpf-in-kubernetes/</a></li>\n<li><a href=\"https://qmonnet.github.io/whirl-offload/2016/09/01/dive-into-bpf/\">https://qmonnet.github.io/whirl-offload/2016/09/01/dive-into-bpf/</a></li>\n<li><a href=\"https://www.ferrisellis.com/content/ebpf_past_present_future/\">https://www.ferrisellis.com/content/ebpf_past_present_future/</a></li>\n<li><a href=\"https://blogs.igalia.com/dpino/2019/01/07/introduction-to-xdp-and-ebpf/\">https://blogs.igalia.com/dpino/2019/01/07/introduction-to-xdp-and-ebpf/</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=4SiWL5tULnQ\">https://www.youtube.com/watch?v=4SiWL5tULnQ</a></li>\n<li><a href=\"https://ebpf.io/what-is-ebpf/#what-is-ebpf\">https://ebpf.io/what-is-ebpf/#what-is-ebpf</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#0-bpf\">0. BPF</a></p>\n</li>\n<li>\n<p><a href=\"#1-cbpf-vs-ebpf\">1. cBPF vs. eBPF</a></p>\n<ul>\n<li><a href=\"#11-bpf%EC%9D%98-%EC%97%AD%EC%82%AC\">1.1. BPF의 역사</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-how-to-work\">2. How to work</a></p>\n</li>\n<li>\n<p><a href=\"#3-ebpf%EB%A5%BC-%EC%9D%B4%EB%A3%A8%EB%8A%94-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C%EB%93%A4\">3. eBPF를 이루는 구성 요소들</a></p>\n<ul>\n<li>\n<p><a href=\"#31-ebpf-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8\">3.1. eBPF 프로그램</a></p>\n</li>\n<li>\n<p><a href=\"#22-loader--verification\">2.2. Loader &#x26; Verification</a></p>\n<ul>\n<li><a href=\"#verification\">Verification</a></li>\n<li><a href=\"#jit-complication\">JIT Complication</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 24, 2022","title":"TIL - eBPF","categories":"TIL Linux","author":"Mini","emoji":"📖"},"fields":{"slug":"/eBPF/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://sominsong.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/BPF-LSM/","nextSlug":"/eBPF/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}